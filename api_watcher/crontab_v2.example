# Пример crontab для API Watcher V2
# Еженедельная проверка изменений в API документации

# Установка:
# 1. Отредактируйте пути ниже
# 2. Запустите: crontab -e
# 3. Вставьте нужные строки

# ============================================
# ЕЖЕНЕДЕЛЬНАЯ ПРОВЕРКА (рекомендуется)
# ============================================

# Каждое воскресенье в 10:00
0 10 * * 0 cd /path/to/api-watcher && /path/to/venv/bin/python api_watcher/weekly_check.py >> /var/log/api_watcher_weekly.log 2>&1

# ============================================
# ЕЖЕДНЕВНАЯ ПРОВЕРКА (для критичных API)
# ============================================

# Каждый день в 9:00
# 0 9 * * * cd /path/to/api-watcher && /path/to/venv/bin/python -m api_watcher.watcher_v2 >> /var/log/api_watcher_daily.log 2>&1

# ============================================
# ПРОВЕРКА ДВАЖДЫ В НЕДЕЛЮ
# ============================================

# Понедельник и четверг в 10:00
# 0 10 * * 1,4 cd /path/to/api-watcher && /path/to/venv/bin/python api_watcher/weekly_check.py >> /var/log/api_watcher.log 2>&1

# ============================================
# ЕЖЕМЕСЯЧНАЯ ПРОВЕРКА
# ============================================

# Первое число каждого месяца в 10:00
# 0 10 1 * * cd /path/to/api-watcher && /path/to/venv/bin/python api_watcher/weekly_check.py >> /var/log/api_watcher_monthly.log 2>&1

# ============================================
# ПРИМЕЧАНИЯ
# ============================================

# Формат crontab:
# * * * * * команда
# │ │ │ │ │
# │ │ │ │ └─── День недели (0-7, 0 и 7 = воскресенье)
# │ │ │ └───── Месяц (1-12)
# │ │ └─────── День месяца (1-31)
# │ └───────── Час (0-23)
# └─────────── Минута (0-59)

# Переменные окружения:
# Если используете .env файл, убедитесь что он доступен
# Или добавьте переменные напрямую в crontab:
# ZENROWS_API_KEY=your_key
# GEMINI_API_KEY=your_key
# SLACK_BOT_TOKEN=your_token
# SLACK_CHANNEL=#api-changes

# Логирование:
# >> /var/log/api_watcher.log 2>&1  - добавляет в конец файла
# > /var/log/api_watcher.log 2>&1   - перезаписывает файл

# Проверка cron:
# crontab -l  - показать текущие задачи
# crontab -e  - редактировать задачи
# crontab -r  - удалить все задачи

# Отладка:
# Если cron не работает, проверьте:
# 1. Права на выполнение: chmod +x api_watcher/weekly_check.py
# 2. Логи cron: tail -f /var/log/syslog | grep CRON
# 3. Пути к Python и проекту (используйте абсолютные пути)
