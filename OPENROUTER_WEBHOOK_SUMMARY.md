# OpenRouter + Webhook - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. OpenRouter AI
- ‚úÖ –°–æ–∑–¥–∞–Ω `api_watcher/utils/openrouter_analyzer.py`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 100+ –º–æ–¥–µ–ª–µ–π (Claude, GPT-4, Llama –∏ –¥—Ä.)
- ‚úÖ –ï–¥–∏–Ω—ã–π API –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `watcher_v2.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenRouter

### 2. Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω `api_watcher/notifier/webhook_notifier.py`
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö API
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ URL
- ‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Å–≤–æ–¥–∫–∏
- ‚úÖ –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `config.py`:
  - `OPENROUTER_API_KEY`
  - `OPENROUTER_MODEL`
  - `OPENROUTER_SITE_URL`
  - `OPENROUTER_APP_NAME`
  - `WEBHOOK_URL`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `.env.example`

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `OPENROUTER_WEBHOOK_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã `README.md` –∏ `CHANGELOG.md`

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenRouter

```bash
# 1. –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –Ω–∞ https://openrouter.ai/keys
# 2. –î–æ–±–∞–≤—å—Ç–µ –≤ .env
OPENROUTER_API_KEY=sk-or-v1-your-key-here
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ .env
WEBHOOK_URL=https://your-webhook.com/api/notifications
```

### –ó–∞–ø—É—Å–∫

```bash
cd api_watcher
pip install -r requirements.txt
python -m api_watcher.watcher_v2
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```
‚úÖ ZenRows –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
‚úÖ OpenRouter AI –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (–º–æ–¥–µ–ª—å: anthropic/claude-3.5-sonnet)
‚úÖ Slack notifier –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
‚úÖ Webhook notifier –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
‚úÖ Webhook: —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å–ø–µ—à–µ–Ω (200)
```

## üìä –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ OpenRouter

| –ú–æ–¥–µ–ª—å | –¶–µ–Ω–∞ | –ö–∞—á–µ—Å—Ç–≤–æ | –°–∫–æ—Ä–æ—Å—Ç—å |
|--------|------|----------|----------|
| `anthropic/claude-3.5-sonnet` | $3/$15 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ë—ã—Å—Ç—Ä–æ |
| `openai/gpt-4-turbo` | $10/$30 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –°—Ä–µ–¥–Ω–µ |
| `google/gemini-pro-1.5` | $0.35/$1.05 | ‚≠ê‚≠ê‚≠ê‚≠ê | –ë—ã—Å—Ç—Ä–æ |
| `meta-llama/llama-3.1-70b` | $0.35/$0.40 | ‚≠ê‚≠ê‚≠ê | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ |

## üîî –§–æ—Ä–º–∞—Ç webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API
```json
{
  "event": "api_change_detected",
  "timestamp": "2024-11-20T10:30:00.000Z",
  "data": {
    "api_name": "Stripe API",
    "method_name": "Create Customer",
    "url": "https://stripe.com/docs/api/customers",
    "summary": "–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä email",
    "severity": "moderate",
    "key_changes": ["–ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä: email"]
  }
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL
```json
{
  "event": "documentation_url_updated",
  "timestamp": "2024-11-20T10:30:00.000Z",
  "data": {
    "api_name": "Stripe API",
    "old_url": "https://stripe.com/docs/api/old",
    "new_url": "https://stripe.com/openapi.json",
    "doc_type": "openapi"
  }
}
```

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
watcher_v2.py
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AI Analyzer                          ‚îÇ
‚îÇ  OpenRouter (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚ñº
        –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
                ‚îÇ
                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)            ‚îÇ
‚îÇ  - Slack (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)              ‚îÇ
‚îÇ  - Webhook (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```
api_watcher/
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ openrouter_analyzer.py      # OpenRouter AI –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ notifier/
‚îÇ   ‚îî‚îÄ‚îÄ webhook_notifier.py         # Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ config.py                       # –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

OPENROUTER_WEBHOOK_GUIDE.md        # –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
OPENROUTER_WEBHOOK_SUMMARY.md      # –≠—Ç–∞ —Å–≤–æ–¥–∫–∞
```

## üîç –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `api_watcher/watcher_v2.py` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ OpenRouter –∏ webhook
- `api_watcher/config.py` - –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `api_watcher/.env.example` - –ø—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `CHANGELOG.md` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–ø–∏—Å–∏

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### OpenRouter
- ‚úÖ –ï–¥–∏–Ω—ã–π API –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ì–∏–±–∫–∏–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ø–æ —Ü–µ–Ω–µ/–∫–∞—á–µ—Å—Ç–≤—É
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 100+ –º–æ–¥–µ–ª–µ–π

### Webhook
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON)
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ Slack

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç OpenRouter
```python
from api_watcher.utils.openrouter_analyzer import OpenRouterAnalyzer

analyzer = OpenRouterAnalyzer(
    api_key="sk-or-v1-...",
    model="anthropic/claude-3.5-sonnet"
)

result = analyzer.analyze_changes(
    "—Å—Ç–∞—Ä—ã–π —Ç–µ–∫—Å—Ç",
    "–Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç",
    "Test API"
)
print(result)
```

### –¢–µ—Å—Ç Webhook
```bash
curl -X POST https://your-webhook.com/api/notifications \
  -H "Content-Type: application/json" \
  -d '{"event":"test_connection","data":{"message":"Test"}}'
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–æ–ª—å–∫–æ OpenRouter (–±–µ–∑ webhook)
```bash
OPENROUTER_API_KEY=sk-or-v1-...
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
```

### –¢–æ–ª—å–∫–æ Webhook (–±–µ–∑ AI)
```bash
WEBHOOK_URL=https://your-webhook.com/api/notifications
```

### –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
OPENROUTER_API_KEY=sk-or-v1-...
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
WEBHOOK_URL=https://your-webhook.com/api/notifications
SLACK_BOT_TOKEN=xoxb-...
SLACK_CHANNEL=#api-changes
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ [–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](OPENROUTER_WEBHOOK_GUIDE.md)
- üìñ [OpenRouter –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://openrouter.ai/docs)
- üìñ [–°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π](https://openrouter.ai/models)

## ‚ùì FAQ

**Q: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenRouter?**  
A: –ù–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ AI –∞–Ω–∞–ª–∏–∑–∞. OpenRouter –¥–æ–±–∞–≤–ª—è–µ—Ç —É–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ webhook –±–µ–∑ Slack?**  
A: –î–∞, –ø—Ä–æ—Å—Ç–æ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ SLACK_BOT_TOKEN.

**Q: –ö–∞–∫—É—é –º–æ–¥–µ–ª—å –≤—ã–±—Ä–∞—Ç—å?**  
A: –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º Claude 3.5 Sonnet - –ª—É—á—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ.

**Q: –ß—Ç–æ –µ—Å–ª–∏ webhook –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω?**  
A: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É, –æ—à–∏–±–∫–∏ –±—É–¥—É—Ç –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω—ã.

**Q: –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç OpenRouter?**  
A: –û—Ç $0.35 –¥–æ $30 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥–µ–ª–∏.

---

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üéâ**

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenRouter AI –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ webhook + Slack.
