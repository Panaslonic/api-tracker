# üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å V1 –Ω–∞ V2

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

| –§—É–Ω–∫—Ü–∏—è | V1 | V2 | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----|----|-----------|
| **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** | JSON —Ñ–∞–π–ª—ã | SQLite/PostgreSQL | ‚úÖ –ò—Å—Ç–æ—Ä–∏—è, –ø–æ–∏—Å–∫, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å |
| **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** | requests | ZenRows + fallback | ‚úÖ –û–±—Ö–æ–¥ –∑–∞—â–∏—Ç—ã, JS —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ |
| **–ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π** | DeepDiff | DeepDiff + OpenRouter AI | ‚úÖ –£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∞–∂–Ω–æ—Å—Ç–∏ |
| **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | Telegram | Telegram + Slack | ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–∞–π–¥–∂–µ—Å—Ç—ã |
| **OpenAPI** | –ë–∞–∑–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ | –°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ + AI —Å–≤–æ–¥–∫–∞ | ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è, breaking changes |
| **HTML** | –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ | –•–µ—à + AI –∞–Ω–∞–ª–∏–∑ | ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ, —É–º–Ω–µ–µ |
| **–ò—Å—Ç–æ—Ä–∏—è** | –ù–µ—Ç | –ü–æ–ª–Ω–∞—è –≤ –ë–î | ‚úÖ –ê—É–¥–∏—Ç, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| **–î–∞–π–¥–∂–µ—Å—Ç—ã** | –ù–µ—Ç | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ | ‚úÖ –°–≤–æ–¥–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |

## üéØ –ö–æ–≥–¥–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å?

### –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –Ω–∞ V2 –µ—Å–ª–∏:

‚úÖ –ù—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π  
‚úÖ –•–æ—Ç–∏—Ç–µ AI-–∞–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π  
‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—Ö–æ–¥ –∑–∞—â–∏—Ç—ã —Å–∞–π—Ç–æ–≤  
‚úÖ –ù—É–∂–Ω—ã –∫—Ä–∞—Å–∏–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack  
‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç–µ –º–Ω–æ–≥–æ API (>10)  
‚úÖ –ù—É–∂–Ω—ã –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã  

### –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –Ω–∞ V1 –µ—Å–ª–∏:

‚ö†Ô∏è –ü—Ä–æ—Å—Ç–æ–π use case (1-5 API)  
‚ö†Ô∏è –ù–µ –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è  
‚ö†Ô∏è –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π  
‚ö†Ô∏è –ù–µ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã  

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (2 –º–∏–Ω—É—Ç—ã)

```bash
cd api_watcher
pip install -r requirements.txt
```

–ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `sqlalchemy` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- `requests` - HTTP –∑–∞–ø—Ä–æ—Å—ã (–¥–ª—è OpenRouter)
- `html2text` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è HTML
- `slack-sdk` - Slack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env (3 –º–∏–Ω—É—Ç—ã)

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
cp .env .env.backup
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ:

```env
# –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è V2
DATABASE_URL=sqlite:///api_watcher.db
OPENROUTER_API_KEY=your_key_here  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
SLACK_BOT_TOKEN=xoxb-your-token  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
SLACK_CHANNEL=#api-changes  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
ZENROWS_API_KEY=your_key_here  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
CHECK_INTERVAL_DAYS=7
```

–°—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ):

```env
# –†–∞–±–æ—Ç–∞—é—Ç –≤ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏—è—Ö
API_WATCHER_SNAPSHOTS_DIR=snapshots
API_WATCHER_URLS_FILE=urls.json
TELEGRAM_BOT_TOKEN=your_token
TELEGRAM_CHAT_ID=your_chat_id
```

### –®–∞–≥ 3: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (5 –º–∏–Ω—É—Ç)

V2 —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é –ë–î –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ. –°—Ç–∞—Ä—ã–µ —Å–Ω—ç–ø—à–æ—Ç—ã –≤ `snapshots/` –º–æ–∂–Ω–æ:

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ backup**

```bash
# –ü—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤—å—Ç–µ –ø–∞–ø–∫—É snapshots/
# V2 —Å–æ–∑–¥–∞—Å—Ç —Å–≤–æ—é –ë–î –∏ –Ω–∞—á–Ω–µ—Ç —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –ë–î** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```python
# migrate_snapshots.py
import json
import os
from api_watcher.storage.database import DatabaseManager
from api_watcher.utils.smart_comparator import SmartComparator

db = DatabaseManager('sqlite:///api_watcher.db')
comparator = SmartComparator()

snapshots_dir = 'snapshots'
for filename in os.listdir(snapshots_dir):
    if not filename.endswith('.json'):
        continue
    
    filepath = os.path.join(snapshots_dir, filename)
    with open(filepath, 'r', encoding='utf-8') as f:
        snapshot = json.load(f)
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    url = snapshot.get('url')
    data = snapshot.get('data', {})
    metadata = snapshot.get('metadata', {})
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    content_type = 'html'
    raw_html = json.dumps(data)
    text_content = raw_html
    
    if 'openapi' in data or 'swagger' in data:
        content_type = 'openapi'
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
    db.save_snapshot(
        url=url,
        raw_html=raw_html,
        text_content=text_content,
        api_name=metadata.get('api_name'),
        method_name=metadata.get('method_name'),
        content_type=content_type,
        content_hash=comparator.calculate_hash(raw_html)
    )
    
    print(f"‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω: {filename}")

db.close()
print("üéâ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
python migrate_snapshots.py
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 –º–∏–Ω—É—Ç—ã)

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python api_watcher/test_v2.py

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python -m api_watcher.watcher_v2
```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (5 –º–∏–Ω—É—Ç)

#### Linux/Mac (cron)

–°—Ç–∞—Ä—ã–π crontab:
```cron
0 10 * * 0 cd /path/to/api-watcher && python api_watcher/main.py
```

–ù–æ–≤—ã–π crontab:
```cron
# V2 —Å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–º –¥–∞–π–¥–∂–µ—Å—Ç–æ–º
0 10 * * 0 cd /path/to/api-watcher && python api_watcher/weekly_check.py
```

#### Windows (Task Scheduler)

–û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–¥–∞—á—É:
- –°—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–ø—Ç: `api_watcher\main.py`
- –ù–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç: `api_watcher\weekly_check.py`

### –®–∞–≥ 6: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ–±–µ –≤–µ—Ä—Å–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:

```bash
# V1 (—Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±)
python api_watcher/main.py

# V2 (–Ω–æ–≤—ã–π —Å–ø–æ—Å–æ–±)
python -m api_watcher.watcher_v2
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç:
- –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ V2
- –ò–º–µ—Ç—å fallback –Ω–∞ V1

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### OpenRouter AI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á: https://openrouter.ai/keys
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   OPENROUTER_API_KEY=sk-or-v1-...
   OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
   ```
3. –ì–æ—Ç–æ–≤–æ! AI –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ë–µ–∑ OpenRouter:**
- V2 –≤—Å–µ —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—á–∏—Ç–∞—é—Ç—Å—è –∑–Ω–∞—á–∏–º—ã–º–∏
- –ù–µ—Ç AI-—Å–≤–æ–¥–æ–∫ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö

### Slack (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –°–æ–∑–¥–∞–π—Ç–µ Slack App: https://api.slack.com/apps
2. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞: `chat:write`, `chat:write.public`
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ workspace
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   SLACK_BOT_TOKEN=xoxb-...
   SLACK_CHANNEL=#api-changes
   ```
5. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª: `/invite @YourBot`

**–ë–µ–∑ Slack:**
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –ù–µ –±—É–¥–µ—Ç –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

### ZenRows (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ù—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–∞–π—Ç–æ–≤ —Å –∑–∞—â–∏—Ç–æ–π:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å: https://www.zenrows.com/
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   ZENROWS_API_KEY=your_key
   ```

**–ë–µ–∑ ZenRows:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–π requests
- –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `.env` —Ñ–∞–π–ª
- [ ] –ü–æ–ª—É—á–µ–Ω—ã API –∫–ª—é—á–∏ (OpenRouter, Slack)
- [ ] –ó–∞–ø—É—â–µ–Ω —Ç–µ—Å—Ç: `python test_v2.py`
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω cron/Task Scheduler
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack
- [ ] –°–æ–∑–¥–∞–Ω backup —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python -c "
from api_watcher.config import Config
print('ZenRows:', Config.is_zenrows_configured())
print('OpenRouter:', Config.is_openrouter_configured())
print('Slack:', Config.is_slack_configured())
"

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
python -c "
from api_watcher.storage.database import DatabaseManager
db = DatabaseManager('sqlite:///api_watcher.db')
print('URLs –≤ –ë–î:', len(db.get_all_urls()))
db.close()
"

# 3. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python -m api_watcher.watcher_v2

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f api_watcher.log
```

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "No module named 'sqlalchemy'"

```bash
pip install sqlalchemy
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Database is locked"

SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø. –†–µ—à–µ–Ω–∏—è:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL:
   ```env
   DATABASE_URL=postgresql://user:pass@localhost/api_watcher
   ```

2. –ò–ª–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–Ω–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)

### –ü—Ä–æ–±–ª–µ–º–∞: OpenRouter –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞
2. –ë–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞
3. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞: https://openrouter.ai/status

–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ - –æ—Ç–∫–ª—é—á–∏—Ç–µ OpenRouter:
```env
# OPENROUTER_API_KEY=...  # –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ
```

### –ü—Ä–æ–±–ª–µ–º–∞: Slack –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –¢–æ–∫–µ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `xoxb-`
2. –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–Ω–∞–ª: `/invite @YourBot`
3. –ü—Ä–∞–≤–∞ –±–æ—Ç–∞: `chat:write`, `chat:write.public`
4. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ —Å `#`: `#api-changes`

–¢–µ—Å—Ç:
```python
from slack_sdk import WebClient
client = WebClient(token="xoxb-...")
response = client.chat_postMessage(
    channel="#api-changes",
    text="Test message"
)
print(response)
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä—ã–µ —Å–Ω—ç–ø—à–æ—Ç—ã –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤:
```python
import json
with open('snapshots/some_file.json', 'r') as f:
    data = json.load(f)
    print(data.keys())  # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: url, data, metadata
```

## üîÑ –û—Ç–∫–∞—Ç –Ω–∞ V1

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π .env
cp .env.backup .env

# 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–ø—Ç
python api_watcher/main.py

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π cron
crontab -e
# –í–µ—Ä–Ω–∏—Ç–µ —Å—Ç–∞—Ä—É—é —Å—Ç—Ä–æ–∫—É
```

V1 –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç V2.

## üìà –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥:

### –ù–µ–¥–µ–ª—è 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ V2
- –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é
- –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Å V1

### –ù–µ–¥–µ–ª—è 2: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
- –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –æ–±–µ –≤–µ—Ä—Å–∏–∏
- V1 –≤ cron (–æ—Å–Ω–æ–≤–Ω–∞—è)
- V2 –≤—Ä—É—á–Ω—É—é (—Ç–µ—Å—Ç–æ–≤–∞—è)

### –ù–µ–¥–µ–ª—è 3: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
- V2 –≤ cron (–æ—Å–Ω–æ–≤–Ω–∞—è)
- V1 –∫–∞–∫ backup

### –ù–µ–¥–µ–ª—è 4: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
- –¢–æ–ª—å–∫–æ V2
- –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ cron –∑–∞–¥–∞—á–∏ V1

## üí° –°–æ–≤–µ—Ç—ã

### –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ V1 –∫–∞–∫ backup

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –¥–ª—è V1
git checkout -b v1-stable
git push origin v1-stable

# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ main –¥–ª—è V2
git checkout main
```

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ë–î –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –¢–µ—Å—Ç–æ–≤–∞—è –ë–î
DATABASE_URL=sqlite:///api_watcher_test.db python -m watcher_v2

# –ü—Ä–æ–¥–∞–∫—à–Ω –ë–î
DATABASE_URL=sqlite:///api_watcher.db python -m watcher_v2
```

### –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –æ–±–µ –≤–µ—Ä—Å–∏–∏

```bash
# V1 –ª–æ–≥–∏
tail -f api_watcher.log

# V2 –ª–æ–≥–∏
tail -f api_watcher_weekly.log
```

## üéâ –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å:

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   ```python
   from api_watcher.storage.database import DatabaseManager
   db = DatabaseManager('sqlite:///api_watcher.db')
   history = db.get_snapshot_history('https://api.example.com/docs')
   for snap in history:
       print(f"{snap.created_at}: {snap.ai_summary}")
   ```

2. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã**
   ```bash
   python api_watcher/weekly_check.py
   ```

3. **AI-–∞–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Slack –¥–ª—è —Å–≤–æ–¥–æ–∫

4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
   ```sql
   sqlite3 api_watcher.db
   SELECT api_name, COUNT(*) as checks, SUM(has_changes) as changes
   FROM snapshots
   GROUP BY api_name;
   ```

---

**–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —É–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ API —Å AI! üöÄ**
