# ü§ñ API Watcher

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Code Style: Black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

**–£–º–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**

API Watcher –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–∞—Ö API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤–∞—Å –æ –ª—é–±—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã, OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, JSON Schema, Postman –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ Markdown –¥–æ–∫—É–º–µ–Ω—Ç—ã.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ API** - –Ω–µ –≤—Å–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –∞ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
- üìã **5 —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: HTML, OpenAPI, JSON, Postman, Markdown
- üéØ **–¢–æ—á–µ—á–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ**: CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã, —è–∫–æ—Ä–∏, —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –ø—É—Ç—è–º
- üíæ **–°–∏—Å—Ç–µ–º–∞ —Å–Ω–∏–º–∫–æ–≤** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏
- üîÑ **–î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ DeepDiff —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –æ—Ç—á–µ—Ç–∞–º–∏
- üì¢ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –∫–æ–Ω—Å–æ–ª—å + Telegram Bot
- ‚öôÔ∏è **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** —á–µ—Ä–µ–∑ JSON –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- üöÄ **–ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ cron, Docker, CI/CD

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/yourusername/api-watcher.git
cd api-watcher

# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r api_watcher/requirements.txt
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   ```bash
   cp api_watcher/.env.example .env
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤ `urls.json`:**
   ```json
   [
     {
       "url": "https://docs.stripe.com/api/customers#create_customer",
       "type": "html",
       "name": "Stripe - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞",
       "selector": ".method",
       "description": "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç–æ–¥–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞"
     }
   ]
   ```

### –ó–∞–ø—É—Å–∫

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫
python api_watcher/main.py

# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
python api_watcher/quick_test.py

# –¢–µ—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
python api_watcher/test_changes.py
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìö [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](api_watcher/README.md)
- üß™ [–û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏](api_watcher/TESTING_REPORT.md)
- ‚öôÔ∏è [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](api_watcher/.env.example)

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ API

```json
{
  "url": "https://docs.stripe.com/api/customers#create_customer",
  "type": "html",
  "name": "Stripe - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞",
  "selector": "#create_customer",
  "description": "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –º–µ—Ç–æ–¥–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞"
}
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è OpenAPI –ø–æ –ø—É—Ç—è–º

```json
{
  "url": "https://petstore3.swagger.io/api/v3/openapi.json",
  "type": "openapi",
  "name": "Swagger Petstore - Pets",
  "method_filter": "/pet",
  "description": "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ —Ä–∞–±–æ—Ç—ã —Å –ø–∏—Ç–æ–º—Ü–∞–º–∏"
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ JSON API

```json
{
  "url": "https://api.github.com",
  "type": "json",
  "name": "GitHub API Root",
  "description": "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ—Ä–Ω–µ–≤–æ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ GitHub"
}
```

## üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ö–æ–Ω—Å–æ–ª—å
```
üîî –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ò–ó–ú–ï–ù–ï–ù–ò–Ø
URL: https://docs.stripe.com/api/customers
–í—Ä–µ–º—è: 2024-10-24 15:30:45
============================================================
‚ûï –î–û–ë–ê–í–õ–ï–ù–û:
  + new_parameter
üîÑ –ò–ó–ú–ï–ù–ï–ù–û:
  üìç description
    –ë—ã–ª–æ: Create a customer
    –°—Ç–∞–ª–æ: Create a new customer with validation
============================================================
```

### Telegram
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
```

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã |
|-----|----------|-------------------------|
| `html` | HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã | `selector` - CSS —Å–µ–ª–µ–∫—Ç–æ—Ä |
| `openapi` | OpenAPI/Swagger | `method_filter` - —Ñ–∏–ª—å—Ç—Ä –ø—É—Ç–µ–π |
| `json` | JSON API/Schema | - |
| `postman` | Postman –∫–æ–ª–ª–µ–∫—Ü–∏–∏ | - |
| `md` | Markdown –¥–æ–∫—É–º–µ–Ω—Ç—ã | - |

## üõ†Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
api_watcher/
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ parsers/             # –ü–∞—Ä—Å–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ html_parser.py
‚îÇ   ‚îú‚îÄ‚îÄ openapi_parser.py
‚îÇ   ‚îú‚îÄ‚îÄ json_parser.py
‚îÇ   ‚îú‚îÄ‚îÄ postman_parser.py
‚îÇ   ‚îî‚îÄ‚îÄ md_parser.py
‚îú‚îÄ‚îÄ storage/             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–Ω–∏–º–∫–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ snapshot_manager.py
‚îú‚îÄ‚îÄ notifier/            # –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ console_notifier.py
‚îÇ   ‚îî‚îÄ‚îÄ telegram_notifier.py
‚îú‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ comparator.py
‚îî‚îÄ‚îÄ tests/               # –¢–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ test_changes.py
    ‚îî‚îÄ‚îÄ quick_test.py
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### Cron (Linux/Mac)
```bash
# –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
*/30 * * * * cd /path/to/api-watcher && python api_watcher/main.py

# –ö–∞–∂–¥—ã–π —á–∞—Å
0 * * * * cd /path/to/api-watcher && python api_watcher/main.py
```

### Task Scheduler (Windows)
```powershell
$action = New-ScheduledTaskAction -Execute "python" -Argument "api_watcher/main.py" -WorkingDirectory "C:\path\to\api-watcher"
$trigger = New-ScheduledTaskTrigger -RepetitionInterval (New-TimeSpan -Minutes 30) -Once -At (Get-Date)
Register-ScheduledTask -TaskName "APIWatcher" -Action $action -Trigger $trigger
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –Æ–Ω–∏—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
cd api_watcher
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
python run_tests.py
# –∏–ª–∏
make test

# –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤
python run_tests.py unit          # –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã
python run_tests.py integration   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
python run_tests.py coverage      # –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
python run_tests.py quick         # –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:**
- üß™ **–Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- üîó **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
- üìä **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞** - –æ—Ç—á–µ—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏
- ‚ö° **CI/CD** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –≤ GitHub Actions

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](api_watcher/tests/README.md).

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö API

–ü—Ä–æ–µ–∫—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ **21 —Ä–∞–∑–ª–∏—á–Ω–æ–º –∏—Å—Ç–æ—á–Ω–∏–∫–µ** –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

- ‚úÖ **17 —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö** (81%)
- üîç **6 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏**
- üìä **23 —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å–Ω–∏–º–∫–∞**

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [–æ—Ç—á–µ—Ç–µ –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏](api_watcher/TESTING_REPORT.md).

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [DeepDiff](https://github.com/seperman/deepdiff) - –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
- [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/) - –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML
- [Requests](https://docs.python-requests.org/) - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- [PyYAML](https://pyyaml.org/) - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å YAML

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:

- üêõ [–°–æ–∑–¥–∞–π—Ç–µ Issue](https://github.com/yourusername/api-watcher/issues)
- üí¨ [–û–±—Å—É–∂–¥–µ–Ω–∏—è](https://github.com/yourusername/api-watcher/discussions)
- üìß Email: your.email@example.com

---

‚≠ê **–ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è!**